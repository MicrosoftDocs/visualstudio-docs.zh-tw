---
title: 測試區域3：簽出-復原簽出 |Microsoft Docs
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, checkout
- source control plug-ins, undo checkout
- source control [Visual Studio SDK], checking out
- source control [Visual Studio SDK], undo checkout
ms.assetid: ce00c5a5-d472-4f45-8776-d77a1fbe9d37
author: madskristensen
ms.author: madsk
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 44abff5adedf8e0cccfb0d5e44486aaa8f36ff12
ms.sourcegitcommit: 5f6ad1cefbcd3d531ce587ad30e684684f4c4d44
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/22/2019
ms.locfileid: "72722555"
---
# <a name="test-area-3-check-outundo-checkout"></a>測試區域3：簽出/復原簽出
這個原始檔控制外掛程式測試區域涵蓋透過 [**簽出**] 和 [**恢復簽出**] 命令，從版本存放區編輯和還原專案。

**簽出**：將版本存放區中的專案標記為已簽出，將本機複本修改為讀取/寫入。

**復原簽出**：將版本存放區中的專案標記為已簽入，將本機複本還原成簽出之前的狀態（視選項而定）。

## <a name="command-menu-access"></a>命令功能表存取

下列 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] 的整合式開發環境功能表路徑用於測試案例中。

##### <a name="check-out"></a>退房：

- 檔案、**原始檔控制**、**簽出**。

- 檔案 **，請** **參閱**。

- 快捷方式功能表，請**參閱**。

- 復原簽出 **：檔案**、**原始檔控制**、**復原簽出**。

## <a name="common-expected-behavior"></a>常見的預期行為

- 在簽出作業之後，目標檔案和（或）資料夾會在版本存放區中標示為已簽出。

- 版本存放區會將簽出的屬性設為正確的使用者。

- 簽出的時間和日期是正確的（依據使用者的設定）。

## <a name="test-cases"></a>測試案例

以下是 [簽出/復原簽出] 測試區域的特定測試案例。

### <a name="case-3a-check-out"></a>案例3a：簽出

本節著重于簽出命令的操作。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|簽出專屬（COE）用戶端專案|1. 建立用戶端專案。<br />2. 將方案加入至原始檔控制。<br />3. 以獨佔方式簽出整個專案 **（[檔案**]、[**簽出**]）。|簽出發生。|
|簽出獨佔（COE）檔案系統或本機 IIS Web 專案|1. 在 [**工具**]、[**選項**]、[**專案**]、[ **web 設定**] 的 [檔案共用] 中設定 Web 服務器<br />2. 建立 Web 專案。<br />3. 將方案加入至原始檔控制。<br />4. 以獨佔方式簽出整個專案 **（檔案**、**原始檔控制**、**簽出**）。|簽出發生。|
|查看方案中的方案專案（處理其他檔案的新方法）|1. 建立空白方案。<br />2. 將方案加入至原始檔控制。<br />3. 查看解決方案。<br />4. 加入數個方案專案。<br />5. 簽入所有新增的專案。<br />6. 選取多個方案專案。<br />7. 簽出選取的專案（快捷方式功能表，請**參閱**）。|選取的檔案已簽出。|
|簽出本機版本（如果 [測試中的外掛程式] 支援這項功能）|1. 使用者1：建立用戶端專案。<br />2. 使用者1：將方案加入至原始檔控制。<br />3. 使用者2：從原始檔控制開啟方案到另一個位置。<br />4. 使用者2：簽出檔案。<br />5. 使用者2：修改檔案。<br />6. 使用者2：簽入檔案。<br />7. 使用者1：簽出檔案的本機版本（請核取 [**簽出**] 對話方塊中的 [**簽出本機版本**] 選項）。|檔案的本機版本已簽出。<br /><br /> 使用者2的修改不會套用至使用者1檔案。|

### <a name="case-3b-disconnected-check-out"></a>案例3b：已中斷連線的簽出

在中斷連線模式中操作，可讓使用者在未直接附加至版本存放區時，提供某種程度的持續原始檔控制支援。 這是由本機快取已登記解決方案和專案的所有相關資訊所完成。

只有在連接到原始檔控制存放區時，才會發生獨佔簽出作業。 共用的簽出作業可以隨時執行，無論是已連線或已中斷連接。 因此，從版本存放區中斷連線時，只會啟用 [**簽出共用**（COS）] 命令。 當中斷連線時，會停用**復原簽出**，因為無法抓取舊版本來取代使用者所做的變更。

當使用者重新連接到版本存放區時，會同步處理所有已登記之解決方案和專案的簽出狀態。 這會針對使用者已執行的簽出，對存放區進行必要的更新。 同步處理發生之後，使用者就能夠繼續正常運作（已連線）。

#### <a name="expected-behavior"></a>預期的行為

- 與版本存放區中斷連線時，無法使用 [**取出獨佔**] 命令。

- 與版本存放區中斷連線時，無法使用 [**恢復簽出**] 命令。

- **共用簽出**命令可以運作。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|在中斷連線的情況下，簽出檔案，然後連接以進行同步處理|1. 使用 [變更原始檔控制] 對話方塊中斷受控制的**專案（檔案**、原始檔**控制**、**變更原始檔控制**）。<br />2. 簽出檔案。<br />3. 按一下警告對話方塊中的 [簽出（中斷連接）]。<br />4. 編輯檔案。<br />5. 使用 [變更原始檔控制] 對話方塊來連接。<br />6. 取得已編輯檔案的最新版本。|常見的預期行為|

### <a name="case-3c-query-editquery-save-qeqs"></a>案例3c：查詢編輯/查詢儲存（QEQS）
 系統會追蹤原始檔控制下的專案以進行編輯、變更和儲存，以協助使用者輕鬆管理其檔案。 編輯 [已簽入] 的受控制專案時，QEQS 會攔截嘗試的編輯，並詢問使用者是否要簽出檔案以進行編輯。 視 [**工具**]、[**選項**] 設定而定，使用者會被迫簽出檔案以進行編輯，或可能允許編輯記憶體中的複本並于稍後簽出。 如果使用者的 [**工具**]、[**選項**] 設定未設定為顯示 [簽出] 對話方塊，而只是要將它簽出，則當使用者進行編輯時，檔案會自動簽出（可能的話）。

#### <a name="expected-behavior"></a>預期的行為

- 在簽出作業之後，目標檔案和（或）資料夾會在版本存放區中標示為已簽出。

- 版本存放區屬性會簽出正確的使用者。

- 簽出的時間和日期是正確的（依據使用者的設定）。

- 目標檔案或資料夾的本機複本是可寫入的。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|編輯已簽入的文字檔|1. 建立包含文字檔的新專案。<br />2. 將方案加入至原始檔控制。<br />3. 設定 [**工具**]、[**選項**]、[**原始檔控制**]、[**允許在磁片上以唯讀方式編輯**檔案] （未核取）。<br />4. 在 [**編輯時簽入**檔案] 下拉式方塊中，設定 [**工具**]、[**選項**]、[**原始檔控制**] 和 [**簽出] 提示**。<br />5. 設定**工具**、**選項**、**原始檔控制**、在**儲存簽入檔案時** **提示簽出**的下拉式方塊。<br />6. 在編輯器中開啟文字檔，嘗試在檔案中輸入新的文字。 如果此步驟成功，請繼續進行下一個步驟。<br />7. 按一下 [**簽出編輯**] 對話方塊中的 [**取消**]。 如果此步驟成功，請繼續進行下一個步驟。<br />8. 設定 [**工具**]、[**選項**]、[**原始檔控制**]、[**允許在磁片上以唯讀方式編輯**檔案] （若要核取）。<br />9. 在編輯器中開啟專案檔，嘗試在檔案中輸入新的文字。 如果此步驟成功，請繼續進行下一個步驟。<br />10. 按一下 [**簽出編輯**] 對話方塊中的 [**編輯**]。 如果此步驟成功，請繼續進行下一個步驟。<br />11. 編輯文字檔並嘗試加以儲存。|`Result of step 6:`<br /><br /> [簽出] [編輯] 對話方塊隨即出現。<br /><br /> `Result of step 7:`<br /><br /> 檔案不變。<br /><br /> `Result of step 9:`<br /><br /> [簽出] [編輯] 對話方塊隨即出現。<br /><br /> `Result of step 10:`<br /><br /> 您可以在記憶體中編輯專案檔。<br /><br /> `Result of step 11:`<br /><br /> [儲存] 時，會顯示 [簽出儲存] 對話方塊。|
|編輯已簽入的方案檔|重複先前測試中所述的步驟，但不要修改文字檔，而是藉由變更方案屬性來修改方案。|與先前的測試相同|
|編輯已簽入的專案檔|重複先前測試中所述的步驟，但不要修改文字檔，而是藉由變更專案屬性來修改專案。|與先前的測試相同。|

### <a name="case-3d-silent-check-out"></a>案例3d：無訊息簽出
 這個子領域涵蓋 [簽**出**] 對話方塊不會出現在每個使用者的**工具**、**選項**、**原始檔控制設定**的情況。

#### <a name="expected-behavior"></a>預期的行為

- 在簽出作業之後，目標檔案和（或）資料夾會在版本存放區中標示為已簽出。

- 版本存放區屬性會簽出正確的使用者。

- 簽出的時間和日期是正確的（依據使用者的設定）。

- 目標檔案或資料夾的本機複本是可寫入的。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|檔案的無訊息簽出|1. 設定**工具**、**選項**、**原始檔控制**，以**在編輯時自動簽出**檔案。<br />2. 使用檔案建立新的專案。<br />3. 將方案加入至原始檔控制。<br />4. 簽出檔案。|檔案會以無訊息模式（沒有 UI）簽出。|
|專案的無訊息簽出|1. 設定**工具**、**選項**、**原始檔控制**，以**在編輯時自動簽出**檔案。<br />2. 建立新的專案。<br />3. 將方案加入至原始檔控制。<br />4. 簽出項目。|檔案會以無訊息模式（沒有 UI）簽出。|

### <a name="case-3e-undo-check-out"></a>案例3e：復原簽出
 [**復原簽出**] 是用來取消檔案的已簽出狀態，並避免簽入對檔案所做的變更。

#### <a name="expected-behavior"></a>預期的行為

- 預設值是以使用者的 [**簽出本機版本**] 設定為基礎。 如果使用者已選擇簽出本機版本，則 [復原簽出] 的預設值一律會還原為已簽出的版本。

- 接受復原之後，**方案總管**中的圖示會針對受影響的檔案進行更新，而且會從 [**暫止簽入**] 視窗中移除該專案。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|復原以獨佔方式簽出的單一檔案|1. 建立用戶端專案。<br />2. 將方案加入至原始檔控制。<br />3. 以獨佔方式簽出檔案。<br />4. 修改檔案。<br />5. 復原簽出 **（檔案**、**原始檔控制**、**復原簽出**）。|一般的預期行為。|
|復原簽出共用的單一檔案簽出|1. 建立用戶端專案。<br />2. 將方案加入至原始檔控制。<br />3. 簽出共用的檔案。<br />4. 修改檔案。<br />5. 復原簽出 **（檔案**、**原始檔控制**、**復原簽出**）。|一般的預期行為。|
|將檔案新增至專案之後，復原專案的簽出|1. 建立新的專案，並將它加入至原始檔控制。<br />2. 簽出項目。<br />3. 將檔案加入至專案。<br />4. 復原專案的簽出。|已加入的檔案已從方案總管中的專案移除。<br /><br /> 專案已不再簽出。|
|從專案中刪除檔案之後，復原專案的簽出|1. 建立新的專案，並將它加入至原始檔控制。<br />2. 簽出項目。<br />3. 從專案中刪除檔案。<br />4. 復原專案的簽出。|已刪除的檔案會出現在方案總管的專案底下。<br /><br /> 專案已不再簽出。|

## <a name="see-also"></a>請參閱
- [原始檔控制外掛程式測試指南](../../extensibility/internals/test-guide-for-source-control-plug-ins.md)
