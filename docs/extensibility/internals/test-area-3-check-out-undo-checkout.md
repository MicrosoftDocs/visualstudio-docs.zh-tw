---
title: 測試區域 3:簽出撤銷簽出 |微軟文件
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, checkout
- source control plug-ins, undo checkout
- source control [Visual Studio SDK], checking out
- source control [Visual Studio SDK], undo checkout
ms.assetid: ce00c5a5-d472-4f45-8776-d77a1fbe9d37
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 5365da1e342df5aea9c1b1cd2ae5a446baea57f1
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/06/2020
ms.locfileid: "80704610"
---
# <a name="test-area-3-check-outundo-checkout"></a>測試區域 3:簽出/復原簽出
此原始程式管理外掛程式測試區域涵蓋透過 **「簽出**」和 **「撤銷簽出**」命令從版本儲存編輯和還原專案。

**簽出**:將版本存儲中的項目標記為簽出,將本地副本修改為讀/寫。

**復原簽出**:在已簽入時在版本存儲中標記專案,在簽出之前將本地副本還原到狀態(具體取決於選項)。

## <a name="command-menu-access"></a>命令選單存取

測試用例[!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]中使用了以下集成開發環境功能表路徑。

##### <a name="check-out"></a>[取出]：

- **檔案**,**原始碼管理**,**簽出**.

- **檔案**,**簽出**.

- 捷徑選單,**簽出**。

- 復原簽出:**檔案**,**原始碼管理**,**請原復出**。

## <a name="common-expected-behavior"></a>常見預期行為

- 簽出操作後,目標檔(s)和/或資料夾(s)在版本存儲中標記為簽出。

- 版本存儲將簽出屬性屬性屬性為正確的使用者。

- 結帳的時間和日期是正確的(根據用戶的設置)。

## <a name="test-cases"></a>測試案例

以下是結帳/撤銷結帳測試區域的特定測試用例。

### <a name="case-3a-check-out"></a>案例 3a:簽出

本節重點介紹簽出命令的操作。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|簽出獨佔 (COE) 客戶端項目|1. 創建用戶端專案。<br />2. 將解決方案添加到原始碼管理。<br />3. 只簽出整個專案(**檔**,**簽出**)。|簽出發生。|
|簽出獨佔 (COE) 檔案系統或本地 IIS Web 專案|1. 將 Web 伺服器連接設定為**工具**、**選項**、**專案****、Web 設定**中的檔案共用。<br />2. 創建 Web 專案。<br />3. 將解決方案添加到原始程式碼管理。<br />4. 完全簽出整個專案(**檔案**、**原始碼管理**,**簽出**)。|簽出發生。|
|檢視解決方案中的解決方案項目(處理其他檔案的新方法)|1. 創建空白解決方案。<br />2. 將解決方案添加到原始碼管理。<br />3. 查看解決方案。<br />4. 添加幾個解決方案項。<br />5. 簽入所有新添加的專案。<br />6. 選擇多個解決方案項。<br />7. 簽出所選專案(快捷菜單,**簽出**)。|已簽出所選檔。|
|簽出本地版本(如果正在測試的外掛程式支援此功能)|1. 使用者 1:創建用戶端專案。<br />2. 使用者 1:將解決方案添加到原始碼管理。<br />3. 使用者 2:將解決方案從原始程式碼管理打開到另一個位置。<br />4. 使用者 2:簽出檔。<br />5. 使用者 2:修改檔。<br />6. 使用者 2:簽入檔。<br />7. 使用者 1:簽出檔案的本地版本(**在" 簽出"** 對話框中**查看本地版本**進階選項)。|簽出檔的本地版本。<br /><br /> 使用者 2 的修改不應用於使用者 1 檔。|

### <a name="case-3b-disconnected-check-out"></a>案例 3b:已斷開連接簽出

在斷開連接模式下操作允許使用者在未直接連接到版本存儲時提供某種程度的持續原始程式碼管理支援。 這是通過本地緩存有關已登記的解決方案和專案的所有相關信息來完成的。

只有在連接到原始程式碼管理儲存時,才能執行獨佔簽出操作。 共用簽出操作可隨時發生,無論是已連接還是斷開連接。 因此,當從版本存儲斷開連接時,僅啟用**簽出共用**(COS) 命令。 斷開連接時,撤銷**簽出**將禁用,因為無法檢索舊版本以替換使用者所做的更改。

當使用者重新連接到版本存儲時,所有已登記的解決方案和專案的簽出狀態將同步。 這將對存儲執行使用者執行的簽出進行必要的更新。 同步發生後,用戶能夠繼續正常工作(已連接)。

#### <a name="expected-behavior"></a>預期行為

- 與版本儲存斷開連接時,無法使用 **「簽出獨佔」** 命令。

- 與版本儲存斷開連接時,無法使用 **「撤銷簽出**」命令。

- **共用簽出**命令工作。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|斷線連線時,簽出檔案,然後連接以同步|1. 使用變更原始碼管理對話框(**檔案**,**源碼管理**,**更改原始碼管理**)斷開受控專案。<br />2. 簽出檔。<br />3. 在警告對話方塊中按一下「簽出(斷開連接)」。<br />4. 編輯檔。<br />5. 使用"更改源控制"對話框進行連接。<br />6. 取得編輯檔的最新版本。|常見預期行為|

### <a name="case-3c-query-editquery-save-qeqs"></a>案例 3c:查詢編輯/查詢保存 (QEQS)
 追蹤原始碼管理的項目進行編輯、更改和儲存,以幫助使用者輕鬆管理其檔。 編輯「簽入」的受控專案時,QEQS 會攔截嘗試的編輯,並詢問使用者是否要簽出該檔以對其進行編輯。 根據**工具**、**選項**設定,使用者要麼被迫簽出檔以進行編輯,要麼可能允許編輯記憶體中的副本,然後簽出。 如果使用者**的工具,****選項**設置未設置為顯示簽出對話方塊,只是簽出它,然後當使用者進行編輯時,檔會自動簽出,只要可能。

#### <a name="expected-behavior"></a>預期行為

- 簽出操作後,目標檔(s)和/或資料夾(s)在版本存儲中標記為簽出。

- 版本存儲將簽出屬性屬性屬性為正確的使用者。

- 簽出的時間和日期正確(根據用戶的設置)。

- 目標檔或資料夾的本地複本是可寫入的。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|編輯簽入的文字檔案|1. 建立包含文字檔的新專案。<br />2. 將解決方案添加到原始碼管理。<br />3. 設定**工具**,**選項**,**原始碼管理**,**允許在磁碟上唯讀時編輯檔**以取消選中。<br />4. 設定**工具**,**選項**,**原始碼管理**,**提示簽出****時籤入的檔案被編輯**組合框.<br />5. 設定**工具**,**選項**,**原始碼管理**,**提示簽出****時籤入的檔案儲存**組合框.<br />6. 在編輯器中打開文字檔,嘗試在檔中鍵入新文字。 如果此步驟成功,請繼續執行下一步。<br />7. 在 **「簽出編輯」** 對話框中按下 **「取消**」。 如果此步驟成功,請繼續執行下一步。<br />8. 設定**工具**,**選項**,**原始碼管理**,**允許在磁碟上唯讀時編輯檔**以進行檢查。<br />9. 在編輯器中打開專案檔,嘗試在檔中鍵入新文字。 如果此步驟成功,請繼續執行下一步。<br />10. 在 **「簽出編輯」** 對話框中按下 **「編輯**」 。。 如果此步驟成功,請繼續執行下一步。<br />11. 編輯文字檔並嘗試儲存它。|`Result of step 6:`<br /><br /> 簽出"編輯"對話方塊。<br /><br /> `Result of step 7:`<br /><br /> 檔保持不變。<br /><br /> `Result of step 9:`<br /><br /> 簽出"編輯"對話方塊。<br /><br /> `Result of step 10:`<br /><br /> 您可以在記憶體中編輯專案檔。<br /><br /> `Result of step 11:`<br /><br /> 保存時,將顯示"簽出保存"對話框。|
|編輯簽入的解決方案檔案|重複上一個測試中描述的步驟,但不要修改文本檔,而是通過更改解決方案屬性來修改解決方案。|與前一次測試相同|
|編輯簽入的項目檔|重複上一個測試中描述的步驟,但不要修改文本檔,而是通過更改專案屬性來修改專案。|與以前的測試相同。|

### <a name="case-3d-silent-check-out"></a>案例 3d:靜默簽出
 此子區域涵蓋簽出方案,其中 **「 簽出」** 對話方塊未按使用者**的工具**,**選項**,**原始程式碼管理設定**顯示。

#### <a name="expected-behavior"></a>預期行為

- 簽出操作後,目標檔(s)和/或資料夾(s)在版本存儲中標記為簽出。

- 版本存儲將簽出屬性屬性屬性為正確的使用者。

- 簽出的時間和日期正確(根據用戶的設置)。

- 目標檔或資料夾的本地複本是可寫入的。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|檔案的靜默簽出|1. 設定**工具**,**選項**,**原始碼管理**以**自動簽署檔案編輯**.<br />2. 使用檔案建立新專案。<br />3. 將解決方案添加到原始程式碼管理。<br />4. 簽出檔。|檔以靜默方式簽出(無 UI)。|
|專案的靜默簽出|1. 設定**工具**,**選項**,**原始碼管理**以**自動簽署檔案編輯**.<br />2. 創建新專案。<br />3. 將解決方案添加到原始程式碼管理。<br />4. 查看專案。|檔以靜默方式簽出(無 UI)。|

### <a name="case-3e-undo-check-out"></a>案例 3e:撤銷簽出
 **復原簽出**用於取消檔的簽出狀態,並避免簽入對檔所做的更改。

#### <a name="expected-behavior"></a>預期行為

- 默認值基於使用者的 **「簽出本地版本」** 設定。 如果用戶選擇簽出本地版本,則撤銷簽出的預設值是始終恢復到已簽出的版本。

- 接受復原後,**解決方案資源管理器**中的圖示將更新受影響的檔,並且該專案將從**掛起簽入視窗**中刪除。

|動作|測試步驟|要驗證的預期結果|
|------------|----------------|--------------------------------|
|復原簽出的檔案 (獨佔檔案) 的簽出|1. 創建用戶端專案。<br />2. 將解決方案添加到原始碼管理。<br />3. 專門簽出檔。<br />4. 修改檔。<br />5. 復原簽出(**檔案**,**原始碼管理**,**復原簽出**)。|常見預期行為。|
|復原簽出分享的單一個檔案的簽出|1. 創建用戶端專案。<br />2. 將解決方案添加到原始碼管理。<br />3. 簽出共享的檔。<br />4. 修改檔。<br />5. 復原簽出(**檔案**,**原始碼管理**,**復原簽出**)。|常見預期行為。|
|新增檔案後復原項目|1. 創建新專案並將其添加到原始程式碼管理。<br />2. 查看專案。<br />3. 向專案添加檔。<br />4. 撤銷專案簽出。|添加的檔案將從解決方案資源管理器中的專案中刪除。<br /><br /> 不再簽出專案。|
|從項目中移除檔案後復原項目簽出|1. 創建新專案並將其添加到原始程式碼管理。<br />2. 查看專案。<br />3. 從項目中刪除檔。<br />4. 撤銷專案簽出。|已刪除的檔案將顯示在解決方案資源管理器中的專案下。<br /><br /> 不再簽出專案。|

## <a name="see-also"></a>另請參閱
- [原始檔控制外掛程式測試指南](../../extensibility/internals/test-guide-for-source-control-plug-ins.md)
