---
title: Visual Studio 中用於分析負載測試的計數器面板
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- load tests, counters panel
ms.assetid: e1a388d7-5d33-4631-931a-5653ac4aefdc
author: gewarren
ms.author: gewarren
manager: douge
ms.prod: visual-studio-dev15
ms.technology: vs-ide-test
ms.openlocfilehash: 229097b12e5b32e6be6af6b9614a628346780063
ms.sourcegitcommit: 240c8b34e80952d00e90c52dcb1a077b9aff47f6
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/23/2018
ms.locfileid: "49921479"
---
# <a name="use-the-counters-panel-in-graphs-view-and-tables-view"></a>使用圖形檢視和資料表檢視中的計數器面板

當負載測試正在執行，或者您正在分析負載測試結果時，[計數器] 面板就會顯示在 [負載測試分析器] 的 [圖形] 檢視和 [資料表] 檢視中。 如需詳細資訊，請參閱[在圖形檢視中分析負載測試結果](../test/analyze-load-test-results-in-the-graphs-view.md)、[在資料表檢視中分析負載測試結果和錯誤](../test/analyze-load-test-results-and-errors-in-the-tables-view.md)和[如何：存取負載測試結果以進行分析](../test/how-to-access-load-test-results-for-analysis.md)。

[計數器] 面板會針對負載測試期間所收集的所有效能計數器，顯示其結構化檢視。 選擇 [負載測試分析器] 工具列上的 [顯示計數器面板]，即可顯示或隱藏 [計數器] 面板。

計數器會組織成樹狀，其中分葉節點為可圖形化的效能計數器執行個體。

[計數器] 面板提供下列功能：

-   傳達臨界值違規資訊。

-   選擇要圖形化的計數器。

-   負載測試回合期間收集之所有效能計數器的結構化樹狀檢閱，有下列主要分支：

    -   **整體**：包含每個測試代理程式和整個負載測試的效能計數器資料摘要。

    -   **情節名稱**：效能計數器樹狀中標示著負載測試情節名稱的分支，包含所有與特定負載測試情節相關聯的負載測試計數器執行個體。 多數的負載測試計數器都在情節分支內形成巢狀結構。

         情節分支包含 Web 效能測試節點。 Web 效能測試節點包含 [頁面]、[要求] 和 [異動] 節點。 這個結構中的任何分葉節點都是可加入至圖形的效能計數器。

    -   **電腦**包含所有依電腦分組的非負載測試計數器執行個體。 [電腦] 分支包含的節點代表每個與負載測試控制器相關聯的電腦，而此負載測試控制器是由目前所選測試設定之 [角色] 區段所指定。 如需詳細資訊，請參閱[測試控制器和測試代理程式](configure-test-agents-and-controllers-for-load-tests.md)。

         每個電腦節點都包含一組自該電腦收集而來的效能計數器分類。 分類包含計數器，而計數器包含效能計數器執行個體名稱。

    -   **錯誤**：包含負載測試期間偵測到的所有錯誤。 [錯誤] 節點包含數個子分類錯誤節點。 子分類適僅用於不同類型的錯誤，例如，例外狀況和 HTTP 錯誤。

### <a name="scenario-name-node-in-counters-panel"></a>計數器面板中的情節名稱節點

|計數器面板|描述|
|-|-|
|![計數器面板的情節名稱節點](../test/media/ltest__namenode.png)|1.所有與負載測試的 Scenario1 相關聯的效能計數器都出現在這個節點底下。<br />2.情節的所有測試都位於情節節點底下。 標籤表示測試名稱。<br />3.測試節點底下的分葉節點是負載測試案例計數器，其中計數器的執行個體名稱便是測試名稱。<br />4.所有與 Web 效能測試分支相關聯的負載測試頁面計數器執行個體。 這個節點包含負載測試的 Scenario1 中所有與 IBuyBrowse Web 效能測試之 Login GET 頁面 (報告名稱) 相關聯的負載測試步調計數器執行個體。<br />5.頁面節點底下的分頁節點是負載測試頁面計數器。<br />6.所有與 Web 效能測試相關聯的負載測試要求計數器執行個體都包含在 Web 效能測試分支之內。 這個節點包含負載測試的 Scenario1 中所有與 IBuyBrowse Web 效能測試的 Login GET 要求 (報告名稱) 相關聯的要求計數器執行個體。<br />7.要求節點底下的分頁節點是負載測試要求計數器。<br />8.所有與 Web 效能測試相關聯的負載測試異動計數器執行個體都包含在 Web 效能測試分支之內。 這個節點包含負載測試的 Scenario1 中所有與 IBuyBrowse Web 效能測試的 Transaction1 異動相關聯的異動計數器執行個體。<br />9.異動節點底下的分頁節點是負載測試異動計數器。<br />10.單元測試節點。|

## <a name="tasks"></a>工作

|工作|相關主題|
|-|-----------------------|
|**在圖形檢視中新增更多效能計數器至圖形**：在 [計數器] 面板中，藉由在圖形上新增更多效能計數器，您可以將各種資料新增至負載測試圖形。|-   [如何：在圖形上新增和刪除計數器](../test/how-to-add-and-delete-counters-on-graphs-in-load-test-results.md)|
|**分析任何在負載測試中指定的臨界值違規**：[計數器] 面板會顯示表示臨界值違規的圖示，您可以新增至資料表或圖形中做進一步分析。|-   [如何：使用計數器面板來分析臨界值違規](../test/analyze-threshold-rule-violations-in-load-tests.md)|
|**分析任何在負載測試回合期間偵測到的錯誤**：[計數器] 面板的錯誤節點包含錯誤分類和子分類 (例如 HTTP 錯誤)，您可以用來將錯誤新增至圖形中做進一步分析。|-   [如何：使用計數器面板來分析錯誤](../test/how-to-analyze-errors-using-the-counters-panel.md)|

## <a name="performance-counter-sampling-interval-considerations"></a>效能計數器取樣間隔考量

請根據負載測試的長度，在負載測試回合設定中選擇 [採樣速率] 屬性的值。 較小的取樣率 (例如五秒的預設值) 會在負載測試結果資料庫中佔用較多空間。 若為較長的負載測試，增加取樣率會降低您所收集的資料量。 如需詳細資訊，請參閱[如何：指定採樣速率](../test/how-to-specify-the-sample-rate-for-a-load-test.md)。

下面是一些取樣率的方針：

|負載測試持續期間|建議取樣率|
|-|-----------------------------|
|\< 1 小時|5 秒|
|1 - 8 小時|15 秒|
|8 - 24 小時|30 秒|
|> 24 小時|60 秒|

## <a name="considerations-for-including-timing-details-to-collect-percentile-data"></a>在收集百分位數資料中包含計時詳細資料的考量

在 [負載測試編輯器] 的回合設定中，有一個名為 [計時詳細資料儲存區] 的屬性。 如果啟用 [計時詳細資料儲存區] 屬性，則在負載測試期間執行每個個別測試、異動和頁面所需的時間會儲存在負載測試結果存放庫中。 這可以在 [負載測試分析器] 的 [測試]、[異動] 和 [頁面] 索引標籤中顯示第 90 和第 95 個百分位數資料。

在回合設定屬性中，有兩個用於啟用 [計時詳細資料儲存區] 屬性的選項：[僅限統計資料] 和 [所有個別細節]。 不論選擇哪一種，所有的個別測試、頁面和異動都會計時，而且百分位數資料是從個別的計時資料計算出來的。 其差異在於，使用 [僅限統計資料] 選項時，一旦計算出百分位數資料之後，系統就會從存放庫中刪除個別的計時資料。 這樣做可減少使用計時詳細資料時儲存機制所需的空間量。 不過，進階使用者可能會想要使用 SQL 工具，以其他方式處理計時詳細資料。 如果是這種情況，您就應該使用 [所有個別細節] 選項，讓計時詳細資料可用於該項處理。 此外，如果您將此屬性設定為 [所有個別細節]，當負載測試執行完成之後，就可以在 [負載測試分析器] 中使用 [虛擬使用者活動圖] 來分析虛擬使用者活動。 如需詳細資訊，請參閱[在詳細資料檢視中分析虛擬使用者活動](../test/analyze-load-test-virtual-user-activity-in-the-details-view.md)。

負載測試結果存放庫用來儲存計時詳細資料所需的空間可能很大，尤其是長時間執行的負載測試。 其次，在負載測試結束時，用來將這項資料儲存至負載測試結果儲存機制的時間會比較長，因為在負載測試執行完成之後，這項資料會儲存在負載測試代理程式上。 當負載測試完成時，資料就會儲存至儲存機制中。 預設會啟用 [計時詳細資料儲存區] 屬性。 如果您的測試環境發生這種問題，您可能會想要將 [計時詳細資料儲存區] 設定為 [無]。

如需詳細資訊，請參閱[如何：指定計時詳細資料儲存區屬性](../test/how-to-specify-the-timing-details-storage-property-for-a-load-test.md)。

## <a name="see-also"></a>另請參閱

- [分析負載測試結果](../test/analyze-load-test-results-using-the-load-test-analyzer.md)