---
title: 了解模型、類別和關聯性
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language, models
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 3ea744b4939b128f99a38f52e0b4b509c8da25c7
ms.sourcegitcommit: 21d667104199c2493accec20c2388cf674b195c3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/08/2019
ms.locfileid: "55944243"
---
# <a name="understanding-models-classes-and-relationships"></a>了解模型、類別和關聯性
特定領域語言 (DSL) 是由其 DSL 定義檔案，連同您可能會撰寫任何自訂程式碼定義。 大部分的 DSL 方案中的程式碼會產生這個檔案。

 本主題說明 DSL 定義中的核心的功能。

## <a name="the-dsl-definition"></a>DSL 定義
 當您開啟`Dsl\DslDefinition.dsl`，Visual Studio 視窗類似以下圖片。

 ![dsl 設計工具](../modeling/media/dsl_designer.png)

 在 DSL 定義中最重要的資訊會顯示在 DSL 定義圖。 其他資訊，也是 DslDefinition.dsl 的一部分，會顯示在 [DSL 總管] 中，它通常會顯示在圖表的側邊。 您工作的最常見的工作，該圖表和 DSL 總管 中的更進階的自訂項目。

 DSL 定義圖會顯示定義模型項目，以及定義模型項目之間的連結關聯性的網域類別。 此外，它也會顯示的圖形和連接器，用來向使用者顯示的模型項目。

 ![具有泳道的 dsl 設計工具](../modeling/media/dsl_desinger.png)

 當您在 DSL 定義中，在圖表上或在 [DSL 總管] 中，選取項目相關的資訊會顯示在 [屬性] 視窗中。 在 DSL 詳細資料視窗中，可能會顯示其他資訊。

### <a name="models-are-instances-of-dsls"></a>模型是 Dsl 的執行個體
 A*模型*是使用者所建立的 DSL 的執行個體。 模型包含模型項目，也就是您定義時，網域類別和連結的項目，也就是您定義網域關聯性執行個體之間的執行個體。 模型也可以圖案和接點，在圖表顯示的模型項目和連結。 DSL 定義中包含圖形類別、 連接線類別和類別圖表。

 DSL 定義就是所謂*領域模型*。 DSL 定義或網域模型是特定領域語言的設計階段表示法，而模型則是特定領域語言的執行階段具現化。

## <a name="domain-classes-define-model-elements"></a>網域類別定義模型項目
 網域類別用來建立各種項目在網域中，而且網域關聯性是指項目之間的連結。 也就是項目和連結，會具現化設計特定語言的使用者在建立其模型時的設計階段表示。

 下圖顯示已建立之使用者的音樂庫 DSL 的模型。 其中包含的歌曲清單來表示音樂 album。 演出者圓角的方塊中，以表示，而且會連接到要參與的 album。

 ![已產生的 DSL 執行個體模型](../modeling/media/music_instance.png)

 DSL 定義中，會分隔兩個層面。 模型項目，在模型圖上的外觀是由使用圖形類別和連接器類別定義。 使用網域類別和網域關聯性來定義模型中的資訊。

 下圖會顯示在 DSL 定義中的音樂媒體櫃中的網域類別和關聯性。

 ![內嵌和參考關聯性](../modeling/media/music_classes.png)

 下圖顯示四個網域類別：音樂、 專輯、 演出者與歌曲。 網域類別定義網域屬性，例如名稱、 標題和等等。 在執行個體模型中，其中部分屬性的值會顯示在圖表上。

 類別之間是網域關聯性：MusicHasAlbums、 MusicHasArtists、 AlbumbHasSongs 和 ArtistAppearedOnAlbums。 關聯性具有多重性，例如 1..1，0..*。 例如，必須與相關 AlbumHasSongs 關聯性透過一個專輯的所有歌曲。 每個專輯可以有任意數目的歌曲。

### <a name="rearranging-the-dsl-definition-diagram"></a>重新排列 DSL 定義圖表
 請注意網域類別可以在 DSL 定義圖表中，會出現許多次專輯未在此圖中。 總是有一個主要檢視，而且不可以有一些*參考*檢視。

 若要重新排列 DSL 定義圖，您可以：

-   交換主要與參考檢視使用**此處將樹狀結構**並**分割樹狀結構**命令。 以滑鼠右鍵按一下單一網域類別，以查看這些命令。

-   按下 Ctrl + Up 和 Ctrl + 向下鍵，來重新排序的網域類別和圖形類別。

-   摺疊或展開類別使用每個圖形右上角的圖示。

-   按一下底部的 網域類別減號 （-） 摺疊樹狀結構組件。

## <a name="inheritance"></a>繼承
 可以使用繼承來定義網域類別。 若要建立繼承衍生，按一下 [繼承] 工具，按一下衍生的類別中，然後按一下基底類別。 模型項目有它自己的網域類別，以及繼承自基底類別的所有屬性所定義的所有屬性。 它也會繼承其關聯性中的角色。

 也可以使用繼承，之間的關聯性、 圖形和連接器。 繼承必須保留在相同群組內。 圖形無法繼承自領域類別。

## <a name="domain-relationships"></a>網域關聯性
 可透過關聯性連結模型項目。 連結一律是二進位;它們會連結兩個項目。 不過，任何項目可以有許多連結指向其他物件，而且甚至還可以有多個相同的項目組之間的連結。

 就像您可以定義不同類別的項目，您可以定義不同類別的連結。 連結的類別稱為*網域關聯性*。 網域關聯性指定的項目類別其執行個體可以連線。 關聯性的每一端稱為*角色*，以及網域關聯性定義為兩個角色，以及關聯性本身的名稱。

 有兩種類型的網域關聯性： 內嵌關聯性和參考關聯性。 在 DSL 定義圖表中，內嵌關聯性有每個角色，實線，並參考關聯性有虛線。

### <a name="embedding-relationships"></a>內嵌關聯性
 在模型中，除了其根目錄中，每個項目是一個內嵌連結的目標。 因此，整個模型會形成單一樹狀結構的內嵌連結。 內嵌關聯性代表內含項目或擁有權。 以這種方式相關的兩個模型項目也就是為 parent 與 child。 內嵌在父代稱為子系。

 內嵌的連結不通常會顯示明確做為圖表上的連接器。 相反地，它們通常是由表示內含項目。 模型的根由圖表中，並內嵌在其中的項目會顯示為圖表上的圖形。

 在範例中，根類別音樂會有一個內嵌關聯性具有內嵌 AlbumHasSongs 歌曲的專輯的 MusicHasAlbums。 歌曲會顯示為清單內每一個 Album 中的項目。 音樂也有內嵌 MusicHasArtists 演出者類別，其執行個體也會顯示為圖表上的圖形。

 根據預設，內嵌的項目會自動刪除時也會刪除其父系。

 當模型儲存至 XML 格式檔案，內嵌的項目都放在其父代，除非您已自訂序列化。

> [!NOTE]
>  內嵌與繼承不同。 內嵌關聯性中的子系不會繼承父項的屬性。 內嵌是連結的一種模型項目之間。 繼承類別之間的關聯性，而不會建立模型項目之間的連結。

### <a name="embedding-rules"></a>內嵌的規則
 執行個體模型中的每個項目必須是一個內嵌連結的詳細資訊，除了模型根的目標。

 因此，每個非抽象網域類別，除了根類別，都必須是至少一個內嵌關聯性的目標，或它必須繼承自基底類別的內嵌。 類別可以是兩個或多個內嵌的目標，但其執行個體模型項目一次只能有一個父代。 從目標到來源的多重性必須是 0..1 或 1..1。

### <a name="the-explorer-displays-the-embedding-tree"></a>[總管] 中顯示內嵌樹狀結構
 您的 DSL 定義也會建立檔案總管，使用者會看到與他們的模型圖表。

 ![已產生的 DSL 總管](../modeling/media/music_explorer.png)

 [總管] 中會顯示在模型中，即使您尚未定義任何圖形的所有項目。 它會顯示項目和內嵌關聯性，但不是會參考關聯性。

 若要查看項目的網域屬性的值，使用者會在模型圖表或模型總管 中，選取一個項目，並開啟 屬性 視窗。 它會顯示所有網域屬性，包括那些不會顯示在圖表上。 在此範例中，每一首歌有標題和內容類型，但只有標題的值會顯示在圖表上。

## <a name="reference-relationships"></a>參考關聯性
 參考關聯性代表任何種類的非內嵌的關聯性。

 參考關聯性通常會做為圖形之間的連接器顯示在圖表上。

 在模型的 XML 表示法，兩個項目之間的參考連結以表示使用*moniker。* 也就是 moniker 是唯一識別模型中的每個元素的名稱。 每個模型項目之 XML 節點包含指定的關聯性名稱和其他元素的 moniker 的節點。

## <a name="roles"></a>角色
 每個網域關聯性有兩個角色、 來源角色和目標角色。

 在下圖中，點之間的線條**發行者**網域類別與**PublisherCatalog**網域關聯性是一種來源角色。 網域關聯性之間的線並**專輯**網域類別是目標角色。

 ![角色和屬性。](../modeling/media/propertycode.png)

 當您撰寫周遊模型的程式碼時，關聯性相關聯的名稱就顯得特別重要。 比方說，當您建置 DSL 方案時，所產生的類別 「 發行者 」 就會有一個屬性是集合的相簿的目錄。 專輯的類別有一個屬性是類別 「 發行者 」 的單一執行個體的發行者。

 當您在 DSL 定義中建立關聯性時，屬性和關聯性的名稱會指定預設值。 不過，您可以變更它們。

## <a name="multiplicities"></a>多重性
 多重性指定多少項目可以有相同的角色中的網域關聯性。 在範例中，零對多 (0..\*) 上的多重性設定**目錄**角色指定的任何執行個體**發行者**網域類別可以有多個**PublisherCatalog**關聯性連結，因為您想要給予它。

 在圖表上輸入，或修改設定 role 的多重性`Multiplicity`中的屬性**屬性**視窗。 下表描述此屬性的設定。

|多重性類型|描述|
|-|-|
|0..* （零至多個）|每個網域類別執行個體可以有多個關聯性執行個體或關聯性的任何執行個體。|
|0..1 （零到一）|每個網域類別執行個體可以有一個以上的執行個體的關聯性或關聯性的任何執行個體。|
|1..1 （一）|每個網域類別執行個體可以有一個執行個體的關聯性。 您無法從任何角色類別的執行個體來建立此關聯性的多個執行個體。 如果啟用驗證，則當角色類別的任何執行個體不具有關聯性的任何執行個體時，會顯示驗證錯誤。|
|1..* （一對多）|類別上有此多重性之角色的每個執行個體可以有多個執行個體的關聯性，以及每個執行個體必須具有至少一個執行個體的關聯性。 如果啟用驗證，則當角色類別的任何執行個體不具有關聯性的任何執行個體時，會顯示驗證錯誤。|

## <a name="domain-relationships-as-classes"></a>網域關聯性類別
 連結表示為 LinkElement，這是 ModelElement 衍生的類別的執行個體存放區中。 您可以在網域模型圖中的網域關聯性定義這些屬性。

 您也可以進行關聯性的來源或目標的其他關聯性。 在網域模型圖中，以滑鼠右鍵按一下網域關聯性，然後按一下**顯示為類別**。 其他的類別會出現一個方塊。 然後，您就可以進行連線的關聯性。

 如同您對網域類別，您可以定義由繼承，部分關聯性。 選取 [衍生的關聯性，並設定**基底關聯**屬性] 視窗中。

 在衍生的關聯性的專長是其基底關聯性。 網域類別連結應該衍生自它，或連結的基底關聯性的類別相同。 在模型中建立衍生的關聯性的連結時，它是衍生和基底關聯性的執行個體。 在程式碼中，您可以瀏覽至使用的基底或衍生類別所產生的屬性連結的另一端。

## <a name="see-also"></a>另請參閱

- [特定領域語言工具字彙](https://msdn.microsoft.com/ca5e84cb-a315-465c-be24-76aa3df276aa)
