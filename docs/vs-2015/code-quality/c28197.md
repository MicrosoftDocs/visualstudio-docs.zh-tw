---
title: C28197 |Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C28197
helpviewer_keywords:
- C28197
ms.assetid: b685f4c1-9bd1-4ca3-a2b6-6eb87877b5db
caps.latest.revision: 5
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: f50e250daa58f0e423158623afd6761fd23304cb
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/02/2020
ms.locfileid: "77275354"
---
# <a name="c28197"></a>C28197
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

警告 C28197：可能洩漏記憶體  
  
 當資源可能以別名表示為另一個位置時，會報告記憶體和資源流失的警告。  
  
 *指標*指向配置的記憶體，或指向未明確釋放的另一個已配置資源。 這項警告通常是因為呼叫函式上的注釋不當所致，但呼叫函式上的注釋不適當，也可以讓這項功能更有可能。  
  
 如果輸入引數有 `__drv_freesMem` 或注釋，就可以在函式結束時報告這個警告 `__drv_aliasesMem` 。 此警告通常表示有效的流失或目前函式所呼叫的函式需要額外的注釋。  
  
 尤其是，缺少基本 `_In_` 和 `_Out_` 批註會造成這項警告相當有可能，不過也 `__drv_aliasesMem` `__drv_freesMem` 可能需要和批註。 誤報可能是遺漏注釋的結果 `_In_` 。  
  
 採用指標和別名的函式會 (，以避免發生遺漏) 應以批註 `__drv_aliasesMem` 。 如果您建立將物件插入至全域結構的函式，或將它傳遞給執行該工作的系統函數，您應該加入 `__drv_aliasesMem` 批註。  
  
 可以標注可用記憶體的函式 `__drv_freesMem` 。 可用記憶體的主要功能已經有此注釋。  
  
## <a name="example"></a>範例  
 下列程式碼範例會產生此警告：  
  
```  
char *p = (char *)malloc(10);  
test(p);   // does not save a copy of p  
```  
  
 下列程式碼範例可避免此警告：  
  
```  
char *p = (char *)malloc(10);  
test(p);   // does not save a copy of p  
free(p);  
```
