---
title: 模型化應用程式&#39;s 架構 |Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- UML, modeling architecture
ms.assetid: aedce746-9df5-49e1-9662-67eb1b83d313
caps.latest.revision: 21
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 043d6e743df1069e268e63e8ef8acb52555ce659
ms.sourcegitcommit: 8b538eea125241e9d6d8b7297b72a66faa9a4a47
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/23/2019
ms.locfileid: "58945631"
---
# <a name="model-your-app39s-architecture"></a>模型化應用程式&#39;s 架構
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

若要協助確保您的軟體系統或應用程式符合使用者的需要您可以在 Visual Studio 中建立模型，為您的整體結構描述和軟體系統或應用程式的行為的一部分。 您也可以使用模型來描述整個設計所使用的模式。 這些模型可協助您了解現有架構、討論變更，並清楚地傳達您的意圖。  
  
 若要查看哪些 Visual Studio 版本支援這項功能，請參閱 [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport)。  
  
 模型的目的是要減少自然語言描述中所發生的語意模糊，並且協助您和同事將此設計視覺化以及討論替代設計。 模型應該搭配其他文件或討論一起使用。 模型本身無法代表完整的架構規格。  
  
> [!NOTE]
>  在本主題中，「系統」表示您正在開發的軟體。 它可能是許多軟體和硬體元件的大型集合、單一應用程式，或應用程式的一部分。  
  
 系統的架構可以分成兩個區域：  
  
-   [高階設計](#Structure)。 這會描述主要元件以及它們如何彼此互動以完成每項需求。 如果此系統很龐大，則每個元件可能會有自己的高階設計，其中顯示它如何由較小的元件組成。  
  
-   [設計模式](#Patterns)和整個元件設計中使用的慣例。 模式會描述達成程式設計目標的特定方式。 只要在整個設計中使用相同的模式，您的小組就可以降低進行變更和開發新軟體的成本。  
  
##  <a name="Structure"></a> 高階設計  
 高階設計會描述您系統的主要元件以及它們如何彼此互動以達成設計的目標。 下列清單中的活動與高階設計的開發有關，但是不一定有特定順序。  
  
 如果您正在更新現有的程式碼，可能要從描述主要元件開始。 請確定您了解對使用者需求所做的任何變更，然後再加入或修改元件之間的互動。 如果您正在開發新的系統，請從了解使用者需求的主要功能開始。 然後，您可以探勘主要使用案例的互動順序，然後將這些順序合併到元件設計中。  
  
 在每種情況下，最好是平形開發不同活動，並且在早期階段開發程式碼和測試。 請避免嘗試完成其中一個層面，然後才開始另一個層面。 通常，需求和您對系統設計最佳方式的了解會在您撰寫和測試程式碼時變更。 因此，您應該先從了解需求與設計之主要功能，並為其撰寫程式碼開始。 您可以在此專案的後期反覆項目中填入詳細資料。  
  
-   [了解需求](#Requirements)。 任何設計的起點都是清楚了解使用者的需求。  
  
-   [架構模式](#BigDecisions)。 您對此系統核心技術和架構項目所做的選擇。  
  
-   [元件和其介面](#Components)。 您可以繪製元件圖表來顯示此系統的主要部分，並且顯示它們用以彼此互動的介面。 每個元件的介面都包含您在循序圖中所識別的所有訊息。  
  
-   [元件之間的互動](#Interactions)。 您可以針對每個使用案例、事件或流入訊息繪製循序圖，其顯示此系統的主要元件如何互動以達到必要的回應。  
  
-   [資料模型的元件和介面](#Data)。 您可以繪製類別圖來描述在元件之間傳遞以及儲存在元件內部的資訊。  
  
##  <a name="Requirements"></a> 了解需求  
 在搭配需求模型或使用者需求之其他描述的情況下，開發完整應用程式的高階設計最為有效。 如需需求模型的詳細資訊，請參閱 <<c0> [ 模型使用者需求](../modeling/model-user-requirements.md)。  
  
 如果您正在開發的系統是較大系統中的元件，您的部分或所有需求可能會包含在程式設計介面中。  
  
 需求模型會提供下列必要的資訊片段：  
  
- 提供的介面。 提供的介面會列出系統或元件必須提供給其使用者的服務或作業，不論他們是人類使用者還是其他軟體元件都一樣。  
  
- 必要的介面。 必要的介面會列出此系統或元件可以使用的服務或作業。 在某些情況下，您可以將這些服務全部都設計成您自己系統的一部分。 在其他情況下，特別是當您要設計可以在許多組態中結合其他元件的元件時，就要依照外部的考量設定必要的介面。  
  
- 服務需求品質。 系統必須符合的效能、安全性、加強性以及其他目標和條件約束。  
  
  需求模型是從系統使用者的觀點撰寫的，不論他們是人類還是其他軟體元件都一樣。 他們完全不了解您系統的內部運作。 相反地，架構模型的目標則是描述內部運作，並且顯示它們如何符合使用者的需求。  
  
  將需求和架構模型分開會很有用，因為這樣做可讓您與使用者便於討論需求。 它也可以協助您在保持需求不變的情況下重構此設計並考慮替代架構。  
  
  您可以用兩種替代方式，將需求和架構模型分開：  
  
- 將它們保存在不同專案的相同方案中。 它們就會在 [UML 模型總管] 中顯示成個別模型。 不同的小組成員可以平行處理這些模型。 您可以在這些模型之間建立有限種類的追蹤。  
  
- 將它們放在相同 UML 模型中，但位於不同套件內。 這樣做可讓您更輕鬆地追蹤這些模型之間的相依性，不過一次只能有一位人員處理此模型。 此外，非常龐大的模型會花較長的時間以載入到 Visual Studio 中。 因此，這種方式較不適用於大型專案。  
  
  您應該要放入需求或架構模型的詳細資料量取決於專案的規模以及小組的大小和分佈。 對簡短專案的小型小組而言，頂多只要簡述商務概念和某些設計模式的類別圖即可；而分散在多個區域的大型專案可能會更加需要詳細資料。  
  
##  <a name="BigDecisions"></a> 架構模式  
 在開發初期，您必須選擇此設計所仰賴的主要技術和項目。 進行這些選擇的區域包含下列各項：  
  
- 基本技術的選擇，例如在資料庫與檔案系統之間選擇，以及在網路應用程式和網頁用戶端之間選擇等等。  
  
- 架構的選擇，例如在 Windows Workflow Foundation 或 ADO.NET Entity Framework 之間選擇。  
  
- 整合方法的選擇，例如在企業服務匯流排或點對點通道之間選擇。  
  
  這些選擇經常是依照服務需求品質 (例如規模和彈性) 來決定，而且可以在得知詳細的需求之前進行。 在大型系統中，硬體和軟體的組態密切相關。  
  
  您所做的選擇會影響您使用及解譯此架構模型的方式。 例如，在使用資料庫的系統中，類別圖中的關聯可能代表資料庫中的關聯或外部索引鍵，而在以 XML 檔案為基礎的系統中，關聯可能表示使用 XPath 的交互參考。 在分散式系統中，循序圖中的訊息可以代表連線上的訊息，而在獨立的應用程式中，它們可以代表函式呼叫。  
  
##  <a name="Components"></a> 元件和其介面  
 這一節的主要建議事項如下所示：  
  
- 建立元件圖來顯示您系統的主要部分。  
  
- 繪製元件或其介面之間的相依性來顯示此系統的結構。  
  
- 使用元件上的介面來顯示每個元件所提供或需要的服務。  
  
- 在大型設計中，您可以繪製個別圖表，將每個元件分解成較小的部分。  
  
  這些重點將在本節的其餘部分中詳述。  
  
### <a name="components"></a>元件  
 架構模型的中央檢視為元件圖表，其中顯示了此系統的主要部分以及它們如何彼此相依。 如需元件圖的詳細資訊，請參閱[UML 元件圖：參考資料](../modeling/uml-component-diagrams-reference.md)。  
  
 ![顯示組件的 UML 元件圖表](../modeling/media/uml-barecomponent.png "UML_BareComponent")  
  
 大型系統的一般元件圖可能包含如下的元件：  
  
-   展示。 提供存取權給使用者的元件，通常在網頁瀏覽器上執行。  
  
-   Web 服務元件。 提供用戶端與伺服器之間的連線。  
  
-   使用案例控制器。 指導使用者逐一完成每個情節的步驟。  
  
-   商務核心。 包含以需求模型中之類別為基礎的類別、實作關鍵作業，並且施加商務條件約束。  
  
-   資料庫。 儲存商務物件。  
  
-   記錄和錯誤處理元件。  
  
### <a name="dependencies-between-components"></a>元件之間的相依性  
 除了元件本身以外，您也可以顯示它們之間的相依性。 兩個元件之間的相依性箭號顯示其中一個元件的變更可能會影響另一個元件的設計。 發生這種情況的原因通常是因為某個元件直接或間接使用其他元件所提供的服務或函式。  
  
 結構完善的架構會清楚排列相依性，其中下列條件成立：  
  
- Code Map 上沒有迴圈。  
  
- 元件可以排列在圖層中，其中每個相依性從某個圖層中的元件移至下一個圖層中的元件。 任何兩個圖層之間的所有相依性方向相同。  
  
  您可以直接顯示元件之間的相依性，也可以顯示附加至此元件之必要和提供的介面之間的相依性。 您可以使用介面來定義每個相依性中使用的作業。 通常在先繪製圖表時，就會顯示元件之間的相依性，而在加入更多資訊之後，這些相依性會由介面之間的相依性所取代。 雖然這兩種版本都是此軟體的正確描述，不過包含介面的版本會比先前的版本提供更多詳細資料。  
  
  對於生產容易維護的軟體而言，管理相依性是最重要的工作。 元件圖應該要反映出您程式碼中的所有相依性。 如果此程式碼已經存在，請確定所有相依性都顯示在該圖表中。 如果程式碼正在開發中，請確定它不包含此元件圖中沒有規劃的相依性。 若要協助您探索程式碼中的相依性，您可以產生分層圖。 若要協助您確定規劃的相依性條件約束已符合，您可以針對分層圖驗證此程式碼。 如需詳細資訊，請參閱[分層圖：參考資料](../modeling/layer-diagrams-reference.md)。  
  
### <a name="interfaces"></a>介面  
 您可以將介面放在元件上，藉以分隔每個元件所提供的主要作業群組並加以命名。 例如，網頁式銷售系統中的元件可能會具有讓客戶用以購買商品的介面、讓供應商用以更新其目錄的介面，以及用以管理系統的第三個介面。  
  
 元件可以有任意數目之提供的和必要的介面。 提供的介面會顯示此元件提供給其他元件使用的服務。 必要的介面會顯示此元件在其他元件中使用的服務。  
  
 如果您同時定義了提供和必要的介面，會有助於您將元件與設計的其餘部分完全分隔，以便使用下列技術：  
  
- 將元件放入測試控管中，其中周圍元件由此測試控管所模擬。  
  
- 獨立於其他元件來開發您的元件。  
  
- 將元件的介面與不同元件結合，藉以在其他內容中重複使用此元件。  
  
  當您想要在介面中定義此作業清單時，可以在 UML 類別圖上建立此介面的另一個檢視。 若要這樣做，請在 [UML 模型總管] 中找出此介面，然後將它拖曳至類別圖。 然後，您就可以將作業加入此介面。  
  
  UML 介面中的作業可以代表任何叫用元件之行為的方式。 它可能代表 Web 服務要求、某些其他種類的訊號或互動，或是一般程式函式呼叫。  
  
  若要判斷要加入哪些作業，請建立循序圖來顯示元件之間彼此互動的方式。 請參閱[元件之間的互動](#Interactions)。 這些循序圖中的每一個都會顯示不同使用案例中發生的互動。 您可以用這種方式，在探索使用案例時，逐漸加入每個元件介面的作業清單。  
  
### <a name="decomposing-a-component-into-parts"></a>將元件分解成組件  
 您可以將上述章節中所描述的程序套用至每個元件。  
  
 您可以將每個元件內部的子元件顯示成「組件」(Part)。 組件實際上就是其父元件的屬性，也是一種類別。 每個組件都具有它自己的類型，這也可以是元件。 您可以將這個元件放在圖表上並顯示其組件。 如需詳細資訊，請參閱[UML 元件圖：指導方針](../modeling/uml-component-diagrams-guidelines.md)。  
  
 將這項技術套用至整個系統會很有用。 請將它繪製為單一元件，並將其主要元件顯示成組件。 這有助於您清楚識別系統的介面和外部環境。  
  
 當某個元件的設計使用了另一個元件時，您通常可以選擇要將它表示成組件，還是表示成透過 [需要介面] 存取的個別元件。  
  
 在下列情況中，請使用組件：  
  
- 父元件的設計必須一律使用組件的元件類型。 因此，該組件的設計就是父元件設計不可或缺的一部分。  
  
- 父元件本身實際上並不存在。 例如，您可能會有一個名為「展示層」的概念元件，代表處理檢視和使用者互動的實際元件集合。  
  
  在下列情況中，請使用藉由必要介面存取之個別元件：  
  
- 必要的元件可以在執行階段藉由其介面與不同的提供元件結合。  
  
- 此設計使得將某個提供者取代成另一個提供者更為容易。  
  
  使用必要的介面通常會比使用組件更好。 雖然此設計可能要花上更久的時間，不過產生的系統會更有彈性。 您也比較容易分別測試此元件。 在其開發計劃中，這允許較低的結合程度。  
  
##  <a name="Interactions"></a> 元件之間的互動  
 這一節的主要建議事項如下所示：  
  
- 識別您系統的使用案例。  
  
- 針對每個使用案例，繪製一個或多個圖表，藉以顯示您系統的元件如何透過與其他元件和使用者共同作業，達成所需的結果。 通常，這些都是循序圖或活動圖。  
  
- 使用介面來指定每個元件所接收的訊息。  
  
- 描述此介面中各項作業的作用。  
  
- 針對每個元件重複此程序，並顯示其組件的互動方式。  
  
  例如，在網頁式銷售系統中，需求模型可能會將客戶採購定義為使用案例。 您可以建立循序圖來顯示客戶與展示層中元件之間的互動，並且顯示他們與倉儲和會計元件之間的互動。  
  
### <a name="identifying-the-initiating-events"></a>識別啟始事件  
 您可以輕鬆地依照系統提供給不同輸入或事件的回應劃分大部分軟體系統所做的工作。 啟始事件可能是下列其中一個事件：  
  
-   使用案例中的第一個動作。 它可能會在此需求模型中顯示為使用案例中的步驟或活動圖中的動作。 如需詳細資訊， [UML 使用案例圖：指導方針](../modeling/uml-use-case-diagrams-guidelines.md)和[UML 活動圖表：指導方針](../modeling/uml-activity-diagrams-guidelines.md)。  
  
-   程式設計介面中的訊息。 如果您正在開發的系統是較大系統中的元件，就應該將它描述成其中一個元件介面的作業。 請參閱[元件和其介面](#Components)。  
  
-   系統所監視的特定條件，或一般事件，例如一天內的某個時間。  
  
### <a name="describe-the-computations"></a>描述計算  
 繪製循序圖來顯示此元件如何回應啟始事件。  
  
 針對按照一般順序參與的每個元件執行個體繪製生命線。 在某些情況下，每個類型可能會有多個執行個體。 如果您已將整個系統描述為單一元件，則它所包含的每個組件都應該要有一條生命線。  
  
 如需詳細資訊，請參閱[UML 循序圖：指導方針](../modeling/uml-sequence-diagrams-guidelines.md)。  
  
 活動圖在某些情況下也很有用。 例如，如果您的元件具有連續資料流，就可以將它描述為物件流程。 如果您的元件具有複雜的演算法，就可以將它描述為控制流程。 請確定您清楚地指出每個動作會由哪些元件來執行 (例如使用註解)。 如需詳細資訊，請參閱[UML 活動圖表：指導方針](../modeling/uml-activity-diagrams-guidelines.md)。  
  
### <a name="specify-the-operations"></a>指定作業  
 這些圖表會顯示每個元件所執行的作業，而這些作業會表示成循序圖上的訊息或活動圖中的動作。  
  
 請針對每個元件一起收集這些作業。 在元件上建立 [提供的介面]，並將這些作業加入此介面。 通常，每種用戶端都會使用個別的介面。 最容易的介面中加入操作**UML 模型總管**。 以相同的方式，從其他用元件收集每個元件所使用的作業，並且將它們放置在附加至此元件的 [需要的介面]。  
  
 將註解加入活動或循序圖，指出在每項作業之後已經達成哪些項目會相當有用。 您也可以撰寫在每個作業的效果其**Local Postcondition**屬性。  
  
###  <a name="Data"></a> 元件和介面的資料模型  
 在此元件介面中定義每項作業的參數和傳回值。 這些作業代表引動過程 (例如 Web 服務要求)，而這些參數則是做為要求之一部分所傳送的資訊片段。 作業會傳回許多值，您可以使用參數搭配**方向**屬性設定為**出**。  
  
 每個參數和傳回值都具有類型。 您可以使用 UML 類別圖來定義這些類型。 您不需要在這些圖表中展示實作的詳細資料。 例如，如果您正在描述做為 XML 傳輸的資料，就可以使用關聯來代表此 XML 節點之間的任何一種交互參考，並且使用類別來代表節點。  
  
 使用註解來描述關聯與屬性的商務條件約束。 例如，如果客戶訂單上的所有項目都必須來自相同的供應商，則您可以藉由參考訂單項目與產品目錄項目之間的關聯，以及參考目錄項目與其供應商之間的關聯來加以描述。  
  
##  <a name="Patterns"></a> 設計模式  
 設計模式會概述如何設計此軟體的特定層面，特別是在系統不同部分中重複出現的層面。 您可以藉由在整個專案中採用統一的方式，降低設計成本、確保使用者介面的一致性，並且降低了解和變更程式碼的成本。  
  
 某些一般設計模式 (例如「觀察器」) 是已知且廣泛適用的設計模式。 此外，也有僅適用於您專案的模式。 例如，在 Web 銷售系統程式碼中會有一些作業，其中的客戶訂單受到變更。 為了確保此訂單的狀態會精確地顯示在每個階段中，這些作業全部都必須遵循特定的通訊協定來更新該資料庫。  
  
 軟體架構的部分工作是要判斷在整個設計中應該採用哪些模式。 這通常是持續進行的工作，因為您將會隨著專案進行而探索出新的模式以及對現有模式的改良。 最好是組織開發計劃，以便在早期階段中執行每個主要設計模式。  
  
 大部分的設計模式都可以部分包含於架構程式碼中。 模式中有一部分可以簡化為要求開發人員使用特定類別或元件，例如確保正確處理資料庫的資料存取層。  
  
 設計模式會在一份文件中加以描述，而且通常包含下列部分：  
  
-   名稱。  
  
-   適用內容的描述。 哪些準則應該會讓開發人員考慮套用這個模式？  
  
-   它所解決之問題的簡短說明。  
  
-   主要部分及其關聯性的模型。 這些可能是類別或元件和介面，以及它們之間的關聯和相依性。 這些項目通常可分為兩類：  
  
    -   在使用此模式的程式碼之任何一部分中，開發人員必須複寫的項目。 您可以使用範本類型來描述這些項目。 如需詳細資訊，請參閱[UML 使用案例圖：參考資料](../modeling/uml-use-case-diagrams-reference.md)。  
  
    -   描述開發人員應該使用之架構類別的項目。  
  
-   組件之間互動的模型 (使用循序圖或活動圖)。  
  
-   命名慣例。  
  
-   此模式會如何解決問題的描述。  
  
-   開發人員能夠採用之變化的描述。  
  
## <a name="see-also"></a>另請參閱  
 [編輯 UML 模型和圖表](../modeling/edit-uml-models-and-diagrams.md)   
 [視覺化程式碼](../modeling/visualize-code.md)   
 [模型使用者需求](../modeling/model-user-requirements.md)   
 [透過模型開發測試](../modeling/develop-tests-from-a-model.md)   
 [在開發程序中使用模型](../modeling/use-models-in-your-development-process.md)
