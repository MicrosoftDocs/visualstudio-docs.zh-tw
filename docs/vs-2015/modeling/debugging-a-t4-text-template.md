---
title: 偵錯 T4 文字範本 |Microsoft Docs
ms.custom: ''
ms.date: 2018-06-30
ms.prod: visual-studio-tfs-dev14
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- text templates, troubleshooting
- text templates, debugging
ms.assetid: 0877fdf2-20bf-42da-b3cc-4c5856b80821
caps.latest.revision: 30
author: gewarren
ms.author: gewarren
manager: douge
ms.openlocfilehash: d04fe451a752c5132a376fd63091aeb6b1ee1f49
ms.sourcegitcommit: 55f7ce2d5d2e458e35c45787f1935b237ee5c9f8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/22/2018
ms.locfileid: "47485087"
---
# <a name="debugging-a-t4-text-template"></a>偵錯 T4 文字範本
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

本主題的最新的版本可從[偵錯 T4 文字範本](https://docs.microsoft.com/visualstudio/modeling/debugging-a-t4-text-template)。  
  
您可以在文字範本中設定中斷點。 若要偵錯設計階段文字範本，請儲存文字範本檔案，，然後選擇**偵錯 T4 範本**快顯功能表的 [方案總管] 中的檔案。 若要偵錯執行階段文字範本，只是偵錯它所屬的應用程式。  
  
 若要偵錯文字範本，您應該了解範本轉換程序的步驟。 不同類型的錯誤會發生在每個步驟。 步驟如下所示。  
  
|步驟|設計階段範本： 發生時|執行階段範本： 發生時|  
|----------|--------------------------------------------|-----------------------------------------|  
|從文字範本產生程式碼。<br /><br /> 指示詞中的錯誤或不相符，或是得紊亂不堪`<#…#>`標記。|當您儲存範本，或叫用的文字轉換。|當您儲存範本，或叫用的文字轉換。|  
|產生的程式碼會編譯。<br /><br /> 在您的範本程式碼的編譯錯誤。|後面的上一個步驟。|以及您的應用程式程式碼。|  
|執行程式碼。<br /><br /> 在您的範本程式碼的執行階段錯誤。|後面的上一個步驟。|當您的應用程式執行，並叫用的範本程式碼。|  
  
 在大部分情況下，錯誤報告提供的範本程式碼中的行號。 當錯誤報表參考的暫存檔案名稱時，常見的原因是不相符的括號中的文字範本的程式碼。  
  
 您可以在文字範本中設定中斷點，並以一般方式偵錯。  
  
## <a name="common-errors-and-fixes"></a>常見的錯誤和修正程式  
 下表列出最常見的錯誤和其修正程式。  
  
|錯誤訊息|描述|方案|  
|-------------------|-----------------|--------------|  
|無法載入基底類別的{0}' 類別繼承的轉換。|如果找不到指定的基底類別，就會發生`inherits`範本指示詞中的參數。 此訊息會提供範本指示詞的行號。|請務必指定的類別存在，且存在於組件已指定在組件指示詞。|  
|無法解析檔案的 include 文字：{0}|找不到包含的範本時，就會發生。 此訊息會提供要求的 include 檔案的名稱。|請確定檔案路徑是相對於原始範本的路徑，或檔案是在已向主應用程式，位置是檔案的完整路徑。|  
|初始化轉換物件時，所產生的錯誤。 將不會執行轉換。|發生於 'Initialize （）' 的轉換類別失敗，或傳回 false。|Initialize （） 函式中的程式碼中指定的基底的轉換類別是來自\<#@template#> 指示詞，並且從指示詞處理器。 造成錯誤的可能失敗的初始化是在錯誤清單。 調查失敗的原因。 您可以查看實際產生的程式碼的 initialize （） 遵循的程序來偵錯範本。|  
|組件 '{0}'的指示詞處理器'{1}' 未獲得 FullTrust 使用權限集合。 只有受信任的組件可提供指示詞處理器。 將不會載入這個指示詞處理器。|系統不授與 FullTrust 權限包含指示詞處理器的組件時發生。 此訊息會提供組件的名稱和指示詞處理器的名稱。|請確定您只使用本機電腦上的受信任的組件。|  
|路徑 '{0}' 必須是這部電腦的本機或信任區域的一部分。|發生於指示詞或組件指示詞參考了不在您本機電腦或在您網路的受信任的區域的檔案。|請務必指示詞或組件指示詞的所在位置的目錄是受信任的區域。 您可以加入您透過 Internet Explorer 的信任區域的網路目錄。|  
|例如，「 無效權杖 ' catch'"或"命名空間不能直接包含成員 」 的多個語法錯誤|在您的範本程式碼中的太多右括號。 編譯器會令人困惑它使用標準的產生程式碼。|請檢查左右大括號和方括號內的程式碼分隔符號數目。|  
|迴圈或條件未編譯或正確執行。 例如：`<#if (i>10)#> Number is: <#= i #>`。<br /><br /> 此程式碼一律會輸出值我。 只有 「 數字是: 「 是條件式。|在 C# 中，一律使用大括號來括住內嵌在控制陳述式中的文字區塊。|加入大括號： `<#if (i>10) { #>    Number is: <#= i #><# } #>`。|  
|「 運算式太複雜 」 時處理設計階段範本，或編譯執行階段 （前置處理過的） 範本。<br /><br /> [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] 會停止運作時嘗試檢查執行階段範本所產生的程式碼。|文字區塊就太長。 T4 會將具有一個字串常值的範本中的每一行的字串串連運算式中的文字區塊。 非常長的文字區塊可以逾越編譯器的大小限制。|中斷這類運算式區塊的長文字區塊：<br /><br /> `<#= "" #>`|  
  
## <a name="warning-descriptions-and-fixes"></a>警告的說明和修正程式  
 如果有的話下, 表將列出最常見的警告，以及修正。  
  
|警告訊息|描述|方案|  
|---------------------|-----------------|--------------|  
|載入 include 檔 '{0}' 傳回 null 或空字串。|如果包含的文字範本檔案是空白，就會發生。 此訊息會提供包含檔案的檔案名稱。|移除 include 指示詞，或確定檔案有一些內容。|  
|正在編譯轉換：|前面加上此字串，以所有的錯誤或編譯的轉換時，來自編譯器的警告。 這個字串表示，編譯器會擲回錯誤或警告。|如果您有問題，找出 DLL 時，您可能需要提供的完整路徑或完整的強式名稱，如果 DLL 是在 GAC 中。|  
|參數 '{0}' 指示詞中已經存在。 將忽略重複的參數。|指示詞中多次指定參數時，就會發生。 此訊息提供的參數和行號指示詞的名稱。|移除重複的參數規格。|  
|載入 include 檔時發生錯誤。 '{0}'。 Include 指示詞會被忽略。|找不到檔案中指定時，就會發生`include`指示詞。 此訊息提供的檔案和行號指示詞的名稱。|請務必包含檔案存在與原始的文字範本檔案相同的目錄或其中一個已向主應用程式的 include 目錄中。|  
|轉換類別指定無效的基底類別。 基底類別必須衍生自 Microsoft.VisualStudio.TextTemplating.TextTransformation。|發生時`inherits`在範本指示詞中的參數會指定不是繼承自類別`TextTransformation`。 此訊息會提供範本指示詞的行號。|指定的類別，衍生自`TextTransformation`。|  
|中的 'template' 指示詞指定了無效的文化特性。 文化特性必須是"XX-XX"格式。 將使用文化特性而異。|發生於指定的文化特性參數，在範本指示詞中的不正確。 此訊息會提供範本指示詞的行號。|將有效的文化特性中的"XX-XX"格式的文化特性參數。|  
|無效的偵錯值 '{0}' 在範本指示詞中指定。 偵錯值必須是"true"或"false"。 將使用的預設值是"false"。|發生時`debug`範本指示詞中的參數指定不正確。 此訊息會提供範本指示詞的行號。|偵錯將參數設定為"true"或"false"。|  
|無效的 HostSpecific 值 '{0}' 在範本指示詞中指定。 HostSpecific 值必須是"true"或"false"。 將使用的預設值是"false"。|發生時的主控件特有參數`template`指示詞指定不正確。 此訊息會提供範本指示詞的行號。|主控件特有將參數設定為"true"或"false"。|  
|無效的語言 '{0}' 中 'template' 指示詞指定。 語言必須是"C#"或"VB"。 將使用"C#"的預設值。|不支援的語言中指定時，就會發生`template`指示詞。 只有"C#"或"VB"允許 （不區分大小寫）。 此訊息會提供範本指示詞的行號。|設定`language`範本指示詞為"C#"或"VB"中的參數。|  
|找不到範本中的多個輸出指示詞。 第一個以外的所有都會被忽略。|發生時多個`output`指示詞會指定範本檔案中。 此訊息提供重複的輸出指示詞的行號。|移除重複`output`指示詞。|  
|找不到範本中的多個範本指示詞。 第一個以外的所有都會被忽略。 範本指示詞的多個參數應指定其中一個範本指示詞內。|如果您指定多個，就會發生`template`文字範本檔案 （包括包含的檔案） 中的指示詞。 此訊息提供重複的範本指示詞的行號。|彙總不同`template`成一個指示詞`template`指示詞。|  
|沒有處理器指定名為指示詞 '{0}'。 指示詞會被忽略。|如果您指定，就會發生`custom`指示詞，但不是提供`processor`屬性。 此訊息提供指示詞和行號的名稱。|提供`processor`屬性的名稱取代`directive`指示詞處理器。|  
|處理器，名為 '{0}'找不到名為指示詞'{1}'。 指示詞會被忽略。|當系統找不到，就會發生`directive`內指定的處理器`custom`指示詞。 此訊息會提供指示詞的名稱、 處理器名稱和指示詞的行號。|設定`processor`屬性中的指示詞，以指示詞處理器的名稱。|  
|必要的參數 '{0}'的指示詞'{1}' 找不到。 指示詞會被忽略。|發生於系統不提供的必要指示詞的參數。 此訊息提供遺漏的參數名稱、 指示詞名稱和行號。|提供遺漏的參數。|  
|處理器名稱為 '{0}'不支援名為指示詞'{1}'。 指示詞會被忽略。|指示詞處理器不支援指示詞時，就會發生。 此訊息提供的名稱和行號有問題的指示詞，以及指示詞處理器的名稱。|更正指示詞的名稱。|  
|檔案的 include 指示詞 '{0}' 會造成無限迴圈。|顯示圓形 include 指示詞會指定 （例如，檔案的包含檔 B，其中包含檔案的）。|未指定循環 include 指示詞。|  
|正在執行轉換：|前面加上此字串，以所有的錯誤或執行轉換時所產生的警告。|不適用。|  
|區塊內找不到未預期的開始或結束標記。 請確定，您未正確輸入 start 或 end 標記，並在範本中，您不需要任何巢狀的區塊。|當您有未預期時，顯示\<# >。 也就是說，如果您有\<# 之後尚未關閉，另一個開啟標記，或有 #> 之前沒有封閉開啟標記時。 此訊息會提供不相符的標記的行號。|移除不相符的開始或結束標記，或使用逸出字元。|  
|指定指示詞格式錯誤。 指示詞會被忽略。 請以格式指定指示詞 `<#@ name [parametername="parametervalue"]*  #>`|顯示由剖析器指示詞未指定正確的格式。 此訊息會提供不正確的指示詞的行號。|確定所有的指示詞會採用`<#@ name [parametername="parametervalue"]*  #>`。 如需詳細資訊，請參閱 < [T4 文字範本指示詞](../modeling/t4-text-template-directives.md)。|  
|無法載入組件 '{0}'的已註冊的指示詞處理器'{1}'<br /><br /> {2}|發生於無法由主機載入指示詞處理器。 訊息會識別組件提供指示詞處理器的指示詞處理器的名稱。|請務必指示詞處理器已正確註冊，並有組件。|  
|找不到類型 '{0}'中的組件'{1}'的已註冊的指示詞處理器'{2}'<br /><br /> {3}|指示詞處理器的類型無法載入組件時發生。 此訊息提供的型別、 組件，和指示詞處理器的名稱。|Vshost 在登錄中尋找指示詞處理器資訊 （名稱、 組件和類型）。 請務必正確地註冊指示詞處理器和型別存在於組件。|  
|發生問題，載入組件 '{0}'|發生於載入組件時發生問題。 此訊息提供的組件名稱。|您可以指定要在載入的組件\<@# assembly #> 指示詞，並指示詞處理器。 此字串的後面的錯誤訊息應該提供更多資料組件載入失敗的原因。|  
|發生問題建立並初始化名為指示詞處理器 '{1}'。 處理器的類型是{0}。 指示詞會被忽略。|發生於系統無法建立或初始化指示詞處理器。 此訊息提供的名稱和行號指示詞和處理器的類型。|請務必使用正確的指示詞處理器，並指示詞處理器，有一個公用預設建構函式。 若要了解指示詞處理器的 initialize （） 方法失敗的原因，否則使用偵錯選項。 如需詳細資訊，請參閱 <<c0> [ 疑難排解文字範本](../modeling/debugging-a-t4-text-template.md)。|  
|處理指示詞時擲回的例外狀況 '{0}'。|指示詞處理器在處理指示詞時，會擲回例外狀況時發生。|請務必指示詞處理器的參數正確無誤。|  
|主應用程式擲回例外狀況，正在嘗試解析組件參考 '{0}'。|發生於主應用程式在嘗試解析組件參考時，會擲回例外狀況。 此訊息會提供組件參考的字串。|組件參考來自\<@# assembly #> 指示詞和指示詞處理器。 請務必在組件參數中提供的 'name' 參數正確無誤。|  
|嘗試將指定不支援{1}的值 '{0}' 指示詞 {2}|發生 RequiresProvidesDirectiveProcessor （全部從它衍生我們產生的指示詞處理器），當您提供不支援要求和提供引數。|請務必，name = 中的名稱 'value' 組中提供要求，並提供參數是否正確。|



