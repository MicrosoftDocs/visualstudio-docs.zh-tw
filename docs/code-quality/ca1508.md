---
title: CA1508:避免使用無作用條件式程式碼
ms.date: 04/23/2020
ms.topic: reference
f1_keywords:
- CA1508
- AvoidDeadConditionalCode
helpviewer_keywords:
- CA1508
- AvoidDeadConditionalCode
author: mavasani
ms.author: mavasani
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 368c33d0a632b89814a9527f978ddf2c9fcbbb33
ms.sourcegitcommit: b885f26e015d03eafe7c885040644a52bb071fae
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/30/2020
ms.locfileid: "85528800"
---
# <a name="ca1508-avoid-dead-conditional-code"></a>CA1508:避免使用無作用條件式程式碼

|Item|值|
|-|-|
|CheckId|CA1508|
|類別|Microsoft。可維護性|
|重大變更|不中斷|

## <a name="cause"></a>原因

方法具有條件式程式碼，一律會 `true` `false` 在執行時間評估為或。 這會導致條件分支中的無作用程式碼 `false` 。

## <a name="rule-description"></a>規則描述

方法可以有條件式程式碼，例如 if 語句、二元運算式（ `==` 、 `!=` 、 `<` 、 `>` ）、null 檢查等等。例如，請考慮下列程式碼：

```csharp
public void M(int i, int j)
{
    if (i != 0)
    {
        return;
    }

    if (j != 0)
    {
        return;
    }

    // Below condition will always evaluate to 'false' as 'i' and 'j' are both '0' here.
    if (i != j)
    {
        // Code in this 'if' branch is dead code.
        // It can either be removed or refactored.
        ...
    }
}
```

C # 和 VB 編譯器會執行包含編譯時間_常數值_的條件式檢查分析，一律會評估為 `true` 或 `false` 。 此分析器會執行非常數變數的資料流程分析，以判斷涉及_非常數值_的重複條件式檢查。 在上述程式碼中，分析器會判斷 `i` `j` `0` 所有到達檢查的程式碼路徑都有和 `i != j` 。 因此，這種檢查一律會 `false` 在執行時間評估為。 If 語句內的程式碼是無作用的程式碼，而且可以移除或重構。 同樣地，分析器會追蹤變數的 null，並報告多餘的 null 檢查。

> [!NOTE]
> 舊版分析無法使用規則 CA1508。 它最初是在[FxCop 分析器](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers)中引進。
> 請注意，此分析器會對非常數值執行昂貴的資料流程分析。 這可能會增加特定程式碼基底的整體編譯時間。 因此，在分析器套件中，預設會停用此規則。 使用者可以在 editorconfig 中啟用此規則，並執行一次性分析和程式碼清除。 如需在 editorconfig 中啟用規則的詳細資訊，請參閱[這裡](https://docs.microsoft.com/visualstudio/code-quality/use-roslyn-analyzers#rule-severity)。

## <a name="when-to-suppress-warnings"></a>隱藏警告的時機

如果您不在意程式碼的可維護性，則可放心抑制此規則的違規。 也可以隱藏識別為誤報的違規。 有可能會從多個執行緒執行的並行程式碼存在。

## <a name="see-also"></a>另請參閱

- [維護性警告](../code-quality/maintainability-warnings.md)
