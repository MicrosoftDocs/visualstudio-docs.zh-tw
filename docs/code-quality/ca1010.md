---
title: CA1010：集合應該實作泛型介面
ms.date: 03/11/2019
ms.topic: reference
f1_keywords:
- CA1010
- CollectionsShouldImplementGenericInterface
helpviewer_keywords:
- CA1010
- CollectionsShouldImplementGenericInterface
ms.assetid: c7d7126f-fa70-40be-8f93-3243e1760dc5
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: a5aec731f453ae7e29f74d6c0198cf16d1ca1f77
ms.sourcegitcommit: ade07bd1cf69b8b494d171ae648cfdd54f7800d3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/21/2020
ms.locfileid: "81648450"
---
# <a name="ca1010-collections-should-implement-generic-interface"></a>CA1010：集合應該實作泛型介面

|||
|-|-|
|TypeName|CollectionsShouldImplementGenericInterface|
|CheckId|CA1010|
|類別|微軟.設計|
|重大變更|不中斷|

## <a name="cause"></a>原因

類型實現介面但不<xref:System.Collections.IEnumerable?displayProperty=fullName><xref:System.Collections.Generic.IEnumerable%601?displayProperty=fullName>實現 介面,並且包含程式集目標 .NET。 此規則忽略實現<xref:System.Collections.IDictionary?displayProperty=fullName>的類型。

預設情況下,此規則僅檢視外部可見類型,但這是[可設定的](#configurability)。 您還可以配置其他介面,以要求實現泛型介面。

## <a name="rule-description"></a>規則描述

若要放寬集合的可用性，請實作其中一個泛型集合介面。 然後,集合可用於填充泛型集合類型,如下所示:

- <xref:System.Collections.Generic.List%601?displayProperty=fullName>
- <xref:System.Collections.Generic.Queue%601?displayProperty=fullName>
- <xref:System.Collections.Generic.Stack%601?displayProperty=fullName>

## <a name="how-to-fix-violations"></a>如何修正違規

要修復違反此規則的行為,實現以下泛型集合介面之一:

- <xref:System.Collections.Generic.IEnumerable%601?displayProperty=fullName>
- <xref:System.Collections.Generic.ICollection%601?displayProperty=fullName>
- <xref:System.Collections.Generic.IList%601?displayProperty=fullName>

## <a name="when-to-suppress-warnings"></a>何時禁止警告

可以安全地禁止顯示此規則的警告;但是,集合的使用將更為有限。

## <a name="configurability"></a>可設定性

如果從[FxCop 分析器](install-fxcop-analyzers.md)運行此規則(而不是使用舊版分析),則可以根據代碼庫的可存取性配置要運行此規則的哪些部分。 例如,要指定規則應僅針對非公共 API 曲面運行,請在專案中將以下鍵值對新增到 .editorconfig 檔案中:

```ini
dotnet_code_quality.ca1010.api_surface = private, internal
```

您可以僅為此規則、所有規則或此類別(設計)中的所有規則配置此選項。 有關詳細資訊,請參閱配置[FxCop 分析器](configure-fxcop-analyzers.md)。

### <a name="additional-required-generic-interfaces"></a>其他必要的通用介面

您可以使用所需的通用完全限定介面(由"->"分隔介面名稱清單(由"*"分隔)。

允許的介面格式:

- 僅介面名稱(包括具有名稱的所有介面,而不考慮包含類型或命名空間)。
- 符號的文件 ID 格式完全限定https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format名稱: 帶有可選的「T:「前綴。

範例：

| 選項值 | 摘要 |
| --- | --- |
|`dotnet_code_quality.CA1010.additional_required_generic_interfaces = ISomething->System.Collections.Generic.IEnumerable`\``1`|實現"I某物"的所有類型,無論其命名空間如何,都有望實現"系統.集合.Generic.IE500"1"。 |
|`dotnet_code_quality.CA1010.additional_required_generic_interfaces = T:System.Collections.IDictionary->T:System.Collections.Generic.IDictionary`\``2`|實現"系統.集合.通用.I字典"的所有類型都有望實現"系統.集合.通用.I字典"2。 |

## <a name="example-violation"></a>範例衝突

下面的示例顯示派生自非泛型`CollectionBase`類的類(引用類型),該類違反此規則。

[!code-csharp[FxCop.Design.CollectionsGenericViolation#1](../code-quality/codesnippet/CSharp/ca1010-collections-should-implement-generic-interface_1.cs)]

要修復違反此規則的行為,執行以下操作之一:

- 實現泛型介面。
- 將基類更改為已實現泛型和非泛型介面(如`Collection<T>`類)的類型。

## <a name="fix-by-base-class-change"></a>依基類別變更修復

下面的示例通過將集合的基類從非泛型`CollectionBase`類更改為泛`Collection<T>`型 (Visual`Collection(Of T)` Basic)類來修復衝突。

[!code-csharp[FxCop.Design.CollectionsGenericBase#1](../code-quality/codesnippet/CSharp/ca1010-collections-should-implement-generic-interface_2.cs)]

更改已發佈的類的基類被視為對現有消費者的一項重大更改。

## <a name="fix-by-interface-implementation"></a>依介面實現修復

下面的範`IEnumerable<T>`例透過這些泛型介面來修復衝突: `ICollection<T>`、`IList<T>``IEnumerable(Of T)`和`ICollection(Of T)`(`IList(Of T)`和, 和 Visual Basic 中)。

[!code-csharp[FxCop.Design.CollectionsGenericInterface#1](../code-quality/codesnippet/CSharp/ca1010-collections-should-implement-generic-interface_3.cs)]

## <a name="related-rules"></a>相關規則

- [CA1005：避免在泛型型別上包含過多參數](../code-quality/ca1005.md)
- [CA1000：不要在泛型型別上宣告靜態成員](../code-quality/ca1000.md)
- [CA1002：不要公開泛型清單](../code-quality/ca1002.md)
- [CA1006：不要在成員簽章中巢狀化泛型類型](../code-quality/ca1006.md)
- [CA1004：泛型方法應該提供類型參數](../code-quality/ca1004.md)
- [CA1003：必須使用一般事件處理常式執行個體](../code-quality/ca1003.md)
- [CA1007：建議在適當時使用泛型](../code-quality/ca1007.md)

## <a name="see-also"></a>另請參閱

- [泛型](/dotnet/csharp/programming-guide/generics/index)
