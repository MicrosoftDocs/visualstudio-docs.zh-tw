---
title: C26115
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C26115
helpviewer_keywords:
- C26115
ms.assetid: 3977a2bb-d1fe-4510-89dd-07fdc69e911c
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 9523129811d94491062b8c337d81dd8143e50dcf
ms.sourcegitcommit: 535ef05b1e553f0fc66082cd2e0998817eb2a56a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/07/2019
ms.locfileid: "72015689"
---
# <a name="c26115"></a>C26115
警告 C26115：無法在函數 \<func > 中釋放鎖定 \<lock >。

 語言不會執行 C/C++ program 中的語法範圍鎖定*取得*和鎖定*釋放*配對。 函式可能會藉由對並行狀態進行可觀察的修改來引入鎖定副作用。 例如，鎖定包裝函式會針對指定的鎖定，遞增鎖定數目或鎖定計數。

 您可以分別使用 `_Acquires_lock_` 或 `_Releases_lock_`，標注具有鎖定取得或鎖定釋放副作用的函式。 如果沒有這類注釋，函式就不會在傳回之後變更任何鎖定計數。 如果取得和發行未平衡，則視為*孤立*。 當函式引進孤立鎖定時，就會發出警告 C26115。

## <a name="example"></a>範例
 下列範例會產生警告 C26115，因為函式中沒有以 `_Acquires_lock_` 標注的孤立鎖定。

```

typedef struct _DATA
{
    CRITICAL_SECTION cs;
} DATA;

void FailToReleaseLock(int flag, DATA* p)
{
    EnterCriticalSection(&p->cs);

    if (flag)
        return; // Warning C26115

    LeaveCriticalSection(&p->cs);
}
```