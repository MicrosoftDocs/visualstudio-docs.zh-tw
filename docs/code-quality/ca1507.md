---
title: CA1507:使用 nameof，而不是字串
ms.date: 05/17/2019
ms.topic: reference
f1_keywords:
- UseNameofInPlaceOfString
- CA1507
helpviewer_keywords:
- UseNameofInPlaceOfString
- CA1507
author: gewarren
ms.author: gewarren
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 15599e37804819b38c3e7902b9e3684635a7e4d0
ms.sourcegitcommit: 209ed0fcbb8daa1685e8d6b9a97f3857a4ce1152
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/16/2019
ms.locfileid: "69547409"
---
# <a name="ca1507-use-nameof-in-place-of-string"></a>CA1507:用`nameof`來取代字串

|||
|-|-|
|TypeName|UseNameofInPlaceOfString|
|CheckId|CA1507|
|Category|Microsoft.Maintainability|
|中斷變更|不中斷|

## <a name="cause"></a>原因

符合包含方法參數名稱的常值或常數，或包含類型的屬性名稱，會當做方法的引數使用。`string`

## <a name="rule-description"></a>規則描述

規則 CA1507 會將`string`常值當做引數使用於方法或函式，其中[nameof](/dotnet/csharp/language-reference/keywords/nameof) （`NameOf` Visual Basic）運算式會加入可讀性和可維護性。 如果符合下列所有條件，則會引發此規則：

- 引數是`string`常值或常數。

- 常值`string`會符合下列其中一項：

  - 在其中叫用方法或函式之方法、lambda 或區域函式的參數名稱。

  - 要在其中叫用方法或函式之類型的屬性名稱。

- 引數會對應至`string`方法的-類型參數或所叫用的函式（亦即，在呼叫位置不會有任何轉換）。

在未來可能會重新具名引數的情況下，規則 CA1507 可改善程式碼維護性`string` ，但不會將常值重新命名為錯誤。 藉由`nameof`使用，當透過重構作業重新具名引數時，將會重新命名符號。 此外，編譯器會攔截參數名稱中的任何拼寫錯誤。

> [!NOTE]
> 舊版分析無法使用規則 CA1507。 它最初是在[FxCop 分析器](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers)版本2.6.0 中引進。

## <a name="how-to-fix-violations"></a>如何修正違規

若要修正違規，請將`string`常值取代為 [nameof](/dotnet/csharp/language-reference/keywords/nameof)`NameOf` （在 Visual Basic）運算式中。 例如，下列兩個程式碼片段會顯示規則違規，以及如何修正此問題：

```csharp
public Book(string title)
{
    // Violates rule CA1507
    Title = title ?? throw new ArgumentNullException("title", "All books must have a title.");
}
```

```csharp
public Book(string title)
{
    // Resolves rule CA1507 violation
    Title = title ?? throw new ArgumentNullException(nameof(title), "All books must have a title.");
}
```

> [!TIP]
> 程式碼修正適用于 Visual Studio 中的這項規則。 若要使用它，請將游標放`string`在常值上，然後按**Ctrl** + **。** (句點)。 從顯示的選項清單中選擇 [**使用 nameof 來表達符號名稱**]。
>
> ![CA1507 的程式碼修正-使用 nameof 來表達符號名稱](media/ca1507-code-fix.PNG)

## <a name="when-to-suppress-warnings"></a>隱藏警告的時機

如果您不在意程式碼的可維護性，則可放心抑制此規則的違規。

## <a name="related-rules"></a>相關規則

- [CA2208:正確地具現化引數例外狀況](ca2208-instantiate-argument-exceptions-correctly.md)

## <a name="see-also"></a>另請參閱

- [可維護性警告](../code-quality/maintainability-warnings.md)
